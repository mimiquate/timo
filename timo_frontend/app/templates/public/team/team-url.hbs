<div class="flex-content public-main">
  <div class="flex-title">
    <h1 data-test="team-title">
      {{this.model.name}}
    </h1>
  </div>
  <div class="side-checkbox">
    <PaperCheckbox
      @value={{showCurrent}}
      @onChange={{action (mut showCurrent)}}
      data-test-checkbox="current"
    >
      List my current timezone
    </PaperCheckbox>
  </div>
  <div class="side-checkbox">
    <PaperCheckbox
      @value={{isCollapsed}}
      @onChange={{action (mut isCollapsed)}}
      @disabled={{not this.sortedMembers.length}}
      data-test-checkbox="collapsed"
    >
      Collapse table
    </PaperCheckbox>
  </div>
  {{#if this.sortedMembers.length}}
    {{#if (not isCollapsed)}}
      <MembersTable @currentRowIndex={{currentRowIndex}} @id="scroll-target" @class="member-content box-shadow-z8-on-white" as |t|>
        <t.head
          @columns={{columns}}
          @enableResize={{false}}
          @enableReorder={{false}}
          as |h|
        >
          <h.row @class="mat-header-row" as |hr|>
            <hr.cell @class="mat-header-cell cell-text-align" as |column|>
              {{column.member.name}} ({{column.member.timezone}})
              {{#if showCurrent}}
                {{#if column.isCurrent}}<div>Current timezone</div>{{/if}}
              {{/if}}
            </hr.cell>
          </h.row>
        </t.head>

        <t.body @rows={{rows}} as |r|>
          <r.row @class="mat-row {{row-filter r.rowValue}}" as |rr|>
            <rr.cell @class="mat-cell cell-text-align cell-color-{{cell-color rr.cellValue}}" as |value|>
              {{!-- Check if value exists because of rendering issue --}}
              {{#if value}}
                {{moment-format value "D MMM YYYY - HH:mm"}}
              {{/if}}
            </rr.cell>
          </r.row>
        </t.body>
      </MembersTable>
    {{else}}
      <MembersTable @currentRowIndex={{currentRowIndex}} @id="scroll-target" @class="member-content box-shadow-z8-on-white" as |t|>
        <t.head
          @columns={{collapsedColumns}}
          @enableResize={{false}}
          @enableReorder={{false}}
          as |h|
        >
          <h.row @class="mat-header-row" as |hr|>
            <hr.cell @class="mat-header-cell cell-text-align" as |column|>
              {{column.member.name}} ({{column.member.timezone}}) {{collapsed-amount column.collapsedMembersCount}}
              {{#if showCurrent}}
                {{#if column.isCurrent}}<div>Current timezone</div>{{/if}}
              {{/if}}
            </hr.cell>
          </h.row>
        </t.head>

        <t.body @rows={{rows}} as |r|>
          <r.row @class="mat-row {{row-filter r.rowValue}}" as |rr|>
            <rr.cell @class="mat-cell cell-text-align cell-color-{{cell-color rr.cellValue}}" as |value|>
              {{!-- Check if value exists because of rendering issue --}}
              {{#if value}}
                {{moment-format value "D MMM YYYY - HH:mm"}}
              {{/if}}
            </rr.cell>
          </r.row>
        </t.body>
      </MembersTable>
    {{/if}}
  {{else}}
    <div class="no-member" data-test="no-member">
      No members in this team
    </div>
  {{/if}}
</div>